- name: Re-read facts after adding custom fact
  setup:
    filter: ansible_python_version

- name: print
  debug:
    msg: ansible_python_version {{ ansible_python_version }}

- name: Get python version
  vars:
    py3: true
  when: ansible_python_version is match("3.*")

- name: Install pip 3.6
  dnf:
    name:
      - python3-pip
    state: present
  vars:
    ansible_python_interpreter: {{ python3_exec }}
  when: py3 is defined

- name: Install python3-libselinux for Python 3
  dnf:
    name:
      - python3-libselinux
    state: present
  vars:
    ansible_python_interpreter: {{ python3_exec }}
  when: py3 is defined
