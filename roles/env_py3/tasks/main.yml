- name: Get facts of ansible_python_version
  setup:
    filter: ansible_python_version

- name: Print python version
  debug:
    msg: ansible_python_version {{ ansible_python_version }}

- name: define var py3
  set_fact:
    py3: true
  when: ansible_python_version is match("3.*")

- name: Install pip 3.6
  dnf:
    name:
      - python3-pip
    state: present
  vars:
    ansible_python_interpreter: "{{ python3_exec }}"
  when: py3 is defined

- name: Install python3-libselinux for Python 3
  dnf:
    name:
      - python3-libselinux
    state: present
  vars:
    ansible_python_interpreter: "{{ python3_exec }}"
  when: py3 is defined
